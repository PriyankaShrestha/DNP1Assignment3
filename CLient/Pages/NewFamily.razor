@page "/NewFamily"
@attribute [Authorize(Policy = "AdminRole")]
@using Models
@using Client.Data.FamilyService

@inject IFamilyService FamilyFile
@inject NavigationManager NavMgr

<h3>Register New Family</h3>

<EditForm Model="@newFamily" OnValidSubmit="@AddNewFamily">
    <DataAnnotationsValidator/>
    <ValidationSummary/>
    <div class="form-group row">
        <label class="col-sm-2 col-form-label">Floor:</label>
        <InputText class="col-sm-6 form-control" @bind-Value="@newFamily.Floor"/>
    </div>
    <div class="form-group row">
        <label class="col-sm-2 col-form-label">House Number:</label>
        <InputNumber class="col-sm-6 form-control" @bind-Value="@newFamily.HouseNumber"/>
    </div>
    <div class="form-group row">
        <label class="col-sm-2 col-form-label">Street Name:</label>
        <InputText class="col-sm-6 form-control" @bind-Value="@newFamily.StreetName"/>
    </div>
    <div class="form-group row">
        <label class="col-sm-2 col-form-label">City:</label>
        <InputText class="col-sm-6 form-control" @bind-Value="@newFamily.City"/>
    </div>
    <p class="actions">
        <button class="btn-primary btn-outline-dark" type="submit">Register new family</button>
    </p>
</EditForm>

@code {
    private Family newFamily = new();
    
    private void AddNewFamily()
    {
        FamilyFile.AddFamilyAsync(newFamily);
    }
}